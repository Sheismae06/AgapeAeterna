<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Agape Aeterna</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Lora&family=Playfair+Display:wght@500;700&display=swap" rel="stylesheet" />

  <!-- CSS -->
  <link rel="stylesheet" href="style.css?v=4" />

  <!-- Favicon -->
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
</head>
<body class="home">
  <nav class="navbar">
    <div class="nav-left">
      <div class="music-toggle" id="music-toggle">
        <svg id="piano-icon" class="piano-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white">
          <path d="M5 3v18h14V3H5zm2 2h2v6h1V5h2v6h1V5h2v6h1V5h2v14H7V5z"/>
        </svg>
        <svg id="piano-slash" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="#c9a96b"
             style="display: none; position: absolute; width: 20px; height: 20px;">
          <line x1="1" y1="1" x2="23" y2="23" stroke-width="2"/>
        </svg>
      </div>
    </div>
    <div class="nav-right">
      <button class="hamburger">â˜°</button>
      <div class="nav-links">
        <a href="index.html" class="active">Home</a>
        <a href="essence.html">Essence</a>
        <a href="collection.html">Collection</a>
        <a href="rewards.html">Rewards</a>
        <a href="testimonials.html">Testimonials</a>
        <a href="contact.html">Contact</a>
      </div>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="hero">
    <h1 class="tagline">Fragrance Beyond Time</h1>
  </section>

  <!-- Background Music -->
  <audio id="bg-music" loop>
    <source src="https://files.freemusicarchive.org/storage-freemusicarchive-org/music/ccCommunity/Komiku/Its_time_for_adventure/Komiku_-_04_-_The_Beginning.mp3" type="audio/mpeg">
  </audio>

  <!-- Script -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const music = document.getElementById('bg-music');
      const pianoIcon = document.getElementById('piano-icon');
      const pianoSlash = document.getElementById('piano-slash');
      const hamburger = document.querySelector('.hamburger');
      const navLinks = document.querySelector('.nav-links');

      let isMusicPlaying = sessionStorage.getItem('musicPlaying') === 'true';

      function updateMusicIcon() {
        if (isMusicPlaying) {
          pianoIcon.classList.add('playing');
          pianoSlash.style.display = "none";
        } else {
          pianoIcon.classList.remove('playing');
          pianoSlash.style.display = "block";
        }
      }

      function toggleMusic() {
        if (isMusicPlaying) {
          music.pause();
        } else {
          music.play().catch(() => console.warn("Autoplay blocked"));
        }
        isMusicPlaying = !isMusicPlaying;
        sessionStorage.setItem('musicPlaying', isMusicPlaying);
        updateMusicIcon();
      }

      // Initial setup
      updateMusicIcon();
      if (isMusicPlaying) {
        music.play().catch(() => {});
      }

      // Click handlers
      document.getElementById('music-toggle').addEventListener('click', toggleMusic);
      hamburger?.addEventListener('click', () => {
        hamburger.classList.toggle('active');
        navLinks.classList.toggle('open');
      });

      // Resume music after any click interaction
      document.body.addEventListener('click', function once() {
        if (isMusicPlaying && music.paused) {
          music.play().catch(() => {});
        }
        document.body.removeEventListener('click', once);
      });
    });
  </script>
</body>
</html>
